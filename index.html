<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Maria's Semantic RSS</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/showdown/1.9.1/showdown.min.js"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        .loader {
            border-top-color: #3498db;
            -webkit-animation: spin 1s linear infinite;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .highlight {
            background-color: #fde047; /* yellow-300 */
            padding: 0 2px;
            border-radius: 3px;
        }
        .tooltip-container {
            position: relative;
            display: inline-block;
            cursor: help;
        }
        .tooltip-text {
            visibility: hidden;
            width: 250px;
            background-color: #334155; /* slate-700 */
            color: #fff;
            text-align: left;
            border-radius: 6px;
            padding: 8px 12px;
            position: absolute;
            z-index: 10;
            bottom: 125%;
            left: 50%;
            margin-left: -125px; /* Use half of the width to center */
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 0.8rem;
            line-height: 1.4;
            font-weight: normal;
        }
        .tooltip-text::after {
            content: "";
            position: absolute;
            top: 100%;
            left: 50%;
            margin-left: -5px;
            border-width: 5px;
            border-style: solid;
            border-color: #334155 transparent transparent transparent;
        }
        .tooltip-container:hover .tooltip-text {
            visibility: visible;
            opacity: 1;
        }
    </style>
</head>
<body class="bg-gray-100 text-gray-800">

    <div class="container mx-auto p-4 md:p-8 max-w-7xl">
        <header class="mb-8">
            <h1 class="text-4xl font-bold text-gray-900 tracking-tight">Maria's Semantic RSS üê∏</h1>
            <p class="text-gray-600 mt-2">Your personal news aggregator. Add RSS feeds and keywords to find the stories that matter to you.</p>
        </header>

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <!-- Left Column: Controls -->
            <aside class="lg:col-span-1 space-y-6">
                <!-- RSS Feeds Management -->
                <div class="bg-white p-6 rounded-xl shadow-md">
                    <div class="flex items-center justify-between mb-4">
                        <h2 class="text-xl font-bold flex items-center">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-2"><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle></svg>
                            RSS Feeds
                        </h2>
                        <div class="tooltip-container">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-gray-400"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="16" x2="12" y2="12"></line><line x1="12" y1="8" x2="12.01" y2="8"></line></svg>
                            <span class="tooltip-text">Manage your news sources here. Add feed URLs directly, paste a list, or use the Feed Finder to discover feeds from a website URL.</span>
                        </div>
                    </div>
                    <div class="space-y-3" id="feed-list">
                        <!-- Default feeds will be populated here -->
                    </div>
                    <div class="mt-4">
                        <input type="text" id="new-feed-url" placeholder="Paste one or more feed URLs" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                        <div class="grid grid-cols-2 gap-2 mt-2">
                            <button id="add-feed-btn" class="w-full bg-blue-600 text-white font-semibold py-2 px-4 rounded-md hover:bg-blue-700 transition duration-200">Add Feed(s)</button>
                            <button id="clear-feeds-btn" class="w-full bg-red-500 text-white font-semibold py-2 px-4 rounded-md hover:bg-red-600 transition duration-200">Clear All</button>
                        </div>
                    </div>
                    <!-- Feed Finder -->
                    <div class="mt-6 border-t pt-4">
                         <h3 class="text-lg font-semibold mb-2 flex items-center">
                             <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-2"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>
                             Feed Finder
                         </h3>
                         <input type="url" id="website-url-input" placeholder="Paste website URL (e.g., cnn.com)" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                         <button id="find-feeds-btn" class="w-full bg-gray-700 text-white font-semibold py-2 px-4 rounded-md hover:bg-gray-800 transition duration-200 mt-2">Find Feed on Page</button>
                         <div id="feed-finder-results" class="mt-2 text-sm space-y-2"></div>
                    </div>
                </div>

                <!-- Keyword Management -->
                <div class="bg-white p-6 rounded-xl shadow-md">
                    <div class="flex items-center justify-between mb-4">
                        <h2 class="text-xl font-bold flex items-center">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-2"><path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><line x1="10" y1="9" x2="8" y2="9"></line></svg>
                            Keywords & Phrases
                        </h2>
                        <div class="tooltip-container">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-gray-400"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="16" x2="12" y2="12"></line><line x1="12" y1="8" x2="12.01" y2="8"></line></svg>
                            <span class="tooltip-text">Enter terms to filter articles. Terms on the same line must ALL appear (AND). Use separate lines for different terms (OR). Start a line with '-' to EXCLUDE articles with that term.</span>
                        </div>
                    </div>
                    <textarea id="keywords-input" class="w-full h-24 p-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="Single words or phrases per line...&#10;e.g., Trump Zelensky (AND)&#10;e.g., -politics (EXCLUDE)"></textarea>
                    
                    <div class="grid grid-cols-2 gap-2 mt-4">
                        <label for="keyword-upload" class="w-full text-center block bg-gray-200 text-gray-700 font-semibold py-2 px-4 rounded-md hover:bg-gray-300 cursor-pointer transition duration-200">
                            Upload List
                        </label>
                        <input type="file" id="keyword-upload" class="hidden" accept=".txt,.csv">
                        <button id="clear-keywords-btn" class="w-full bg-red-500 text-white font-semibold py-2 px-4 rounded-md hover:bg-red-600 transition duration-200">Clear All</button>
                    </div>
                     <div class="mt-2 text-sm text-gray-500">
                        <p><strong>Tip:</strong> Words on the <strong>same line</strong> must ALL appear (AND). Use different lines for OR. Use `-` to exclude.</p>
                    </div>
                </div>

                <!-- Session Management -->
                <div class="bg-white p-6 rounded-xl shadow-md">
                    <div class="flex items-center justify-between mb-4">
                        <h2 class="text-xl font-bold flex items-center">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-2"><path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"></path><polyline points="17 21 17 13 7 13 7 21"></polyline><polyline points="7 3 7 8 15 8"></polyline></svg>
                            Session
                        </h2>
                        <div class="tooltip-container">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-gray-400"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="16" x2="12" y2="12"></line><line x1="12" y1="8" x2="12.01" y2="8"></line></svg>
                            <span class="tooltip-text">Save your current list of feeds and keywords to a file. You can load this file later to restore your session, perfect for managing different research projects.</span>
                        </div>
                    </div>
                    <div class="grid grid-cols-2 gap-2">
                         <button id="save-session-btn" class="w-full bg-indigo-500 text-white font-semibold py-2 px-4 rounded-md hover:bg-indigo-600 transition duration-200">Save Session</button>
                        <label for="load-session-input" class="w-full text-center block bg-gray-200 text-gray-700 font-semibold py-2 px-4 rounded-md hover:bg-gray-300 cursor-pointer transition duration-200">
                            Load Session
                        </label>
                        <input type="file" id="load-session-input" class="hidden" accept=".json">
                    </div>
                </div>
                
                <!-- Live Monitoring -->
                <div class="bg-white p-6 rounded-xl shadow-md">
                     <div class="flex items-center justify-between mb-4">
                        <h2 class="text-xl font-bold flex items-center">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-2"><path d="M22 17H2a3 3 0 0 0 3-3V9a7 7 0 0 1 14 0v5a3 3 0 0 0 3 3zm-8.27 4a2 2 0 0 1-3.46 0"></path><path d="M12 2L12 2"></path><path d="M20 8L20 8"></path><path d="M4 8L4 8"></path></svg>
                            Live Monitoring
                        </h2>
                        <div class="tooltip-container">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-gray-400"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="16" x2="12" y2="12"></line><line x1="12" y1="8" x2="12.01" y2="8"></line></svg>
                            <span class="tooltip-text">Keep track of news in real-time. Set an auto-refresh interval to fetch news automatically. Enable browser notifications to get alerts for new articles that match your keywords, even when the tab is in the background.</span>
                        </div>
                    </div>
                    <div class="space-y-4">
                        <div>
                            <label for="auto-refresh-interval" class="block text-sm font-medium text-gray-700 mb-1">Auto-Refresh</label>
                            <select id="auto-refresh-interval" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                                <option value="0">Off</option>
                                <option value="5">Every 5 minutes</option>
                                <option value="10">Every 10 minutes</option>
                                <option value="15">Every 15 minutes</option>
                            </select>
                        </div>
                        <div>
                             <button id="notifications-btn" class="w-full bg-teal-500 text-white font-semibold py-2 px-4 rounded-md hover:bg-teal-600 transition duration-200 disabled:opacity-50 disabled:cursor-not-allowed">Enable Notifications</button>
                        </div>
                    </div>
                </div>

                 <!-- Filter Options -->
                <div class="bg-white p-6 rounded-xl shadow-md">
                     <div class="flex items-center justify-between mb-4">
                        <h2 class="text-xl font-bold flex items-center">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-2"><path d="M22 3H2l8 9.46V19l4 2v-8.46L22 3z"></path></svg>
                            Filter Options
                        </h2>
                        <div class="tooltip-container">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-gray-400"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="16" x2="12" y2="12"></line><line x1="12" y1="8" x2="12.01" y2="8"></line></svg>
                            <span class="tooltip-text">Refine your results. You can limit articles to a specific timeframe to focus on the most recent news.</span>
                        </div>
                    </div>
                    <div>
                        <label for="date-filter-select" class="block text-sm font-medium text-gray-700 mb-1">Article Age</label>
                        <select id="date-filter-select" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                            <option value="all">All Time</option>
                            <option value="3" selected>Last 3 Days</option>
                            <option value="7">Last 7 Days</option>
                        </select>
                    </div>
                </div>

                <!-- Action Button -->
                <button id="fetch-and-filter-btn" class="w-full bg-green-600 text-white font-bold py-3 px-4 rounded-md hover:bg-green-700 transition duration-200 text-lg flex items-center justify-center">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-2"><path d="M10 12a2 2 0 1 0 4 0 2 2 0 0 0-4 0z"></path><path d="M21 12c-2.667 4.667-6 7-9 7s-6.333-2.333-9-7c2.667-4.667 6-7 9-7s6.333 2.333 9 7z"></path></svg>
                    Fetch & Filter News
                </button>
            </aside>

            <!-- Right Column: Results -->
            <main class="lg:col-span-2">
                <div id="results-container" class="bg-white p-6 rounded-xl shadow-md min-h-[400px]">
                    <div id="results-header" class="flex flex-wrap items-center justify-between mb-4 border-b pb-4">
                        <h2 class="text-xl font-bold">Filtered News</h2>
                        <div class="flex items-center space-x-2 mt-2 sm:mt-0">
                            <span class="text-sm font-medium text-gray-600">Sort by:</span>
                            <button data-sort="date-desc" class="sort-btn bg-gray-200 text-gray-700 text-sm font-semibold py-1 px-3 rounded-md hover:bg-gray-300">Newest</button>
                            <button data-sort="date-asc" class="sort-btn bg-gray-100 text-gray-600 text-sm font-semibold py-1 px-3 rounded-md hover:bg-gray-300">Oldest</button>
                            <button data-sort="relevance" class="sort-btn bg-gray-100 text-gray-600 text-sm font-semibold py-1 px-3 rounded-md hover:bg-gray-300">Relevance</button>
                        </div>
                    </div>
                    <div id="status-area">
                        <div class="text-center text-gray-500 py-16">
                            <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="mx-auto mb-4 text-gray-400"><path d="M12 21a9 9 0 1 0 0-18 9 9 0 0 0 0 18Z"></path><path d="M12 12a5 5 0 0 0 5-5"></path><path d="m12 12-4 4"></path></svg>
                            <h3 class="text-lg font-semibold">Your filtered news will appear here.</h3>
                            <p class="mt-1">Add some feeds and keywords, then click "Fetch & Filter News".</p>
                        </div>
                    </div>
                    <div id="results-list" class="space-y-5">
                        <!-- Filtered articles will be rendered here -->
                    </div>
                </div>
            </main>
        </div>
    </div>

    <script src="scripts.js" defer></script>
</body>
</html>

